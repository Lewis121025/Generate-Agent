# Lewis AI System 产品战略蓝图

_更新日期：2025-11-19_

## 1. 战略定位：双引擎智能基座
Lewis AI System 面向“研究洞察 + 创意生产”两条关键价值链，提供统一的智能基座。通用模式成为企业级研究助理：依托 Web 搜索、代码沙箱、知识库检索、结构化 API 和数据可视化，帮助用户在数分钟内构建含结论、证据与图表的洞察文档。创意模式定位为创作加速器：用户可以用一句话触发分镜草案，也可以输入完整剧本并让系统串联审批、渲染与分发。系统外观坚持高级、克制的设计语言，统一的 Docker Compose 部署（`lewis-api` + Postgres + Redis + Weaviate + S3 兼容存储）确保能力在任意环境可复制，产品经理、创作者与治理团队通过同一入口协作，既共享模板与资产，也共享安全与预算边界。

## 2. 核心价值场景
1. **Insight Lab**：策略、增长或投研团队将行业问题输入通用模式，系统自动抓取公开数据、调用内部知识库、运行沙箱代码并实时生成可视化，形成“可立即讨论”的研究初稿。
2. **Creative Sprint**：创作者从模板画廊挑选行业蓝图，输入品牌基调与预算，快速获得结构化脚本与镜头提案，并在阶段面板中对接审批、渲染与分发，保持与成本计划同步。
3. **Unified Governance Console**：运营与合规团队在统一仪表盘中查看 Usage Analytics、成本曲线、版本状态与访问日志，实现跨团队共享的透明治理，防止资源浪费或越权调用。

## 3. 体验架构：从启用到闭环
体验以模板画廊为起点，同时提供“快速启动”与“引导式规划”双路径：
- **快速启动**：针对熟悉流程的用户，直接从模板或空白工作区进入运行面板，立刻试跑 Prompt、上传附件或触发批处理。
- **引导式规划**：复杂项目通过向导逐步确认目标、预算、工具偏好与审批人，向导允许随时试跑以校准模型反馈。

运行阶段，通用模式强调 ReAct 迭代与透明调用轨迹；创意模式以阶段列（Brief、脚本、分镜、渲染、分发）驱动长流程，并在关键节点展示成本、进度与版本差异。整个体验伴随语义提示、渐进式暴露与柔和反馈，用户可随时将任一版本升格为模板、生成只读分享或创建限定 Scope 的 API Token，满足跨团队共创与评审。

## 4. 主动式成本治理
成本守护从“事后监控”升级为“事前规划 + 事中熔断 + 事后洞察”的闭环：
- **预算建模**：支持为项目、团队、API Key 设定基础预算与硬性上限，预算策略通过配置中心与 `config.py` 同步。
- **运行前预估**：执行任务前，系统基于历史 Token 消耗、模型单价与工具成本给出区间预估，提醒用户潜在支出。
- **事中控制**：`cost_monitor.py` 对实时消耗做滑窗计算，触发软、硬阈值；达到硬上限自动熔断，并可要求审批人一次性临时扩容。
- **事后洞察**：成本事件写入 `instrumentation.py` 的指标总线，在 Usage Analytics 中与成效 KPI 对齐，帮助决策是否下线模板、调优 Prompt 或更换 Provider。

## 5. 能力与技术底座
Lewis 的技术栈分为四层，每层均与业务价值直接映射：
1. **基础层**：`config.py` 管理多租户配置，`auth.py` 统一 JWT/API Key/SSO，`database.py` & `redis_cache.py` 负责事务与高速缓存，`vector_db.py` 接入 Weaviate，`s3_storage.py` 封装 AWS S3、MinIO 等对象存储，确保部署弹性。
2. **服务层**：`tooling.py` 抽象 LLM、搜索、TTS、视频、第三方 API；`sandbox.py` 提供受限 Python/SQL 执行；`providers.py` 管理多云 Provider 与降级策略。
3. **业务层**：`routers/general.py` 与 `routers/creative.py` 暴露 API，`general/session.py` 处理 ReAct 会话状态，`creative/workflow.py` 管理阶段任务、审批与版本树。
4. **体验层**：模板蓝图中心、Preview/Run 面板、Share Sandbox、Render Queue、自动 QC 与 Analytics 仪表，依赖 `instrumentation.py` 统一的埋点、日志与追踪能力。

## 6. 创意生产链：蓝图到交付的闭环
创意模式坚持“蓝图 → 阶段 → 资产”结构：
- **蓝图配置**：定义 Brief、预算、里程碑、品牌资源与风险提示，可套用行业模板或从零搭建。
- **阶段流转**：脚本、分镜、渲染、分发阶段可并行/串行组合，所有生成动作写入版本树并支持差异对比与回滚。
- **镜头级体验**：包含 Quick Look、参考素材绑定、LUT 切换、场景栈连续性检测，冲突面板实时提示镜头冲突或品牌违规。
- **智能品控**：自动 QC 可配置音量、黑帧、安全区、字幕同步等规则；权利提醒基于素材指纹匹配授权库或用户自建白名单。
- **渲染与分发**：Render Queue 展示优先级、ETA、批次，支持拖拽调度与批量回滚；交付阶段可一键推送到 S3、YouTube、TikTok、Meta 或广告投放平台，并附带预设封面与授权说明。

## 7. 统一运营与治理
Dashboard Landing 汇集 Usage Analytics、Run History、成本面板与操作日志：
- **Usage Analytics**：用分层配色与交互微图展示活跃蓝图、运行次数、失败率、Provider 占比、平均分镜迭代、渲染成功率等指标。
- **版本与审批**：Draft/Active/Published/Archived 四态确保从实验到正式上线的可控过渡，每次变更可审计与回滚。
- **访问边界**：Trusted Host、网络隔离、API Token Scope、最小权限角色模型共同保障安全；所有事件可导出 CSV/JSON 供审计。

## 8. 指标体系与演进路线
指标体系覆盖五大维度：
1. **业务成果**：项目完成率、任务达成率、创作交付周期。
2. **体验效率**：单次迭代耗时、审批周期、Prompt->结果回合数。
3. **质量与安全**：异常告警、失败占比、QC 失败率、权限违规次数。
4. **创作洞察**：热门蓝图、模板复用率、分镜迭代深度、故事完成度。
5. **增长指标**：活跃项目、分享链接点击率、外部 API 调用量。

演进路线采取“三段式”推进：
- **核心增强**：扩展多模态理解/生成模型、引入科学计算与金融 API 工具、完善 JSON 导入导出与权限模板。
- **智能涌现**：通过跨项目分析洞察用户意图，自动推荐高转化率叙事结构、成本最优 Provider 组合与风险预警。
- **生态构建**：开放插件市场、Embed SDK 与自动化 Workflow API，让 Lewis 能融入客户现有制作链路，实现从“工具”到“智能伙伴”的跃迁。

通过上述整体设计，Lewis AI System 不仅保持全功能能力栈，还以更清晰的战略逻辑、可执行的体验路径与可量化的治理体系，支撑企业在研究与创意两条战线上实现持续迭代与可控增长。
